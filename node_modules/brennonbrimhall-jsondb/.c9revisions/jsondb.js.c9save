{"ts":1381923259080,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1381925310183,"patch":[[{"diffs":[[1,"function JSONDB(filepath, columnNames) {\n    if(arguments == 1){\n        this.db = require(filepath);\n        this.filepath = filepath;\n        \n        if(!db.head){\n            throw \"Database file does not have a valid head field\";    \n        }\n        if(!db.head.maxId){\n            throw \"Database file does not have a maxId field\";    \n        }\n        if(!db.head.columnNames){\n            throw \"Database file does not have a valid column names field\";\n        }\n        if(!(db.head.columnNames.length > 0)){\n            throw \"Database file does not have a valid column names field\";\n        }\n    }else if(arguments == 2){\n        var fs = require(\"fs\");\n    \n        var newJSON = {};\n        newJSON.head = {};\n        newJSON.head.maxId = 0;\n        newJSON.head.columnNames = columnNames;\n        newJSON.data = [];\n        \n        fs.writeFileSync(filepath, JSON.stringify(newJSON));\n        \n        this.db = require(filepath);\n        this.filepath = filepath;   \n    }\n}\n\nJSONDB.prototype.insert = function(data){\n    this.db.head.maxId++;\n    data.id = this.db.head.maxId;\n    this.db.data.push(data);\n};\n\nJSONDB.prototype.update = function(data, id){\n    for(var i = 0; i<this.db.data.length; i++){\n        if(this.db.data[i].id == id){\n            //Setting same id value\n            data.id = this.db.data[i].id;\n            this.db.data[i] = data;\n        }\n    }\n};"]],"start1":0,"start2":0,"length1":0,"length2":1395}]],"length":1395,"saved":false}
{"ts":1381925374480,"patch":[[{"diffs":[[0,"    }\n};"],[1,"\n\nJSONDB.prototype.save = function(){\n    var fs = require(\"fs\");\n    fs.writeFileSync(this.filepath, JSON.stringify(this.db));\n}"]],"start1":1387,"start2":1387,"length1":8,"length2":137}]],"length":1524,"saved":false}
{"ts":1381925606493,"patch":[[{"diffs":[[1,"module.exports = JSONDB;\n\n"],[0,"function JSONDB("]],"start1":0,"start2":0,"length1":16,"length2":42},{"diffs":[[0,"        if(!"],[1,"this."],[0,"db.head){\n  "]],"start1":171,"start2":171,"length1":24,"length2":29},{"diffs":[[0,"  }\n        if(!"],[1,"this."],[0,"db.head.maxId){\n"]],"start1":276,"start2":276,"length1":32,"length2":37},{"diffs":[[0,"    if(!"],[1,"this."],[0,"db.head."]],"start1":394,"start2":394,"length1":16,"length2":21},{"diffs":[[0," if("],[-1,"!("],[1,"this."],[0,"db.h"]],"start1":522,"start2":522,"length1":10,"length2":13},{"diffs":[[0,"gth > 0)"],[-1,")"],[0,"{\n      "]],"start1":554,"start2":554,"length1":17,"length2":16}]],"length":1567,"saved":false}
{"ts":1381926185270,"patch":[[{"diffs":[[0,"ames) {\n"],[1,"    this.filepath = filepath;\n"],[0,"    if(a"]],"start1":59,"start2":59,"length1":16,"length2":46},{"diffs":[[0,"h);\n"],[-1,"        this.filepath = filepath;\n"],[0,"    "]],"start1":154,"start2":154,"length1":42,"length2":8}]],"length":1563,"saved":false}
{"ts":1381926314397,"patch":[[{"diffs":[[0," if("],[-1,"arguments == 1"],[1,"!columnNames"],[0,"){\n "]],"start1":100,"start2":100,"length1":22,"length2":20},{"diffs":[[0,"else"],[-1," if(arguments == 2)"],[0,"{\n  "]],"start1":649,"start2":649,"length1":27,"length2":8}]],"length":1542,"saved":false}
{"ts":1381926447314,"patch":[[{"diffs":[[0," }else{\n"],[1,"        //Setting up file structure for first time\n\n"],[0,"        "]],"start1":647,"start2":647,"length1":16,"length2":68}]],"length":1594,"saved":false}
{"ts":1381926486138,"patch":[[{"diffs":[[0,"  this.db = "],[-1,"require("],[1,"JSON.parse(fs.readFileSync(this."],[0,"filepath);\n "]],"start1":989,"start2":989,"length1":32,"length2":56},{"diffs":[[0,"c(this.filepath)"],[1,")"],[0,";\n        this.f"]],"start1":1026,"start2":1026,"length1":32,"length2":33}]],"length":1619,"saved":false}
{"ts":1381926533539,"patch":[[{"diffs":[[0,"is.db = "],[-1,"require("],[1,"JSON.parse(fs.readFileSync(this."],[0,"filepath"]],"start1":129,"start2":129,"length1":24,"length2":48},{"diffs":[[0,"ilepath)"],[1,")"],[0,";\n      "]],"start1":170,"start2":170,"length1":16,"length2":17},{"diffs":[[0,"));\n"],[-1,"        this.filepath = filepath;   \n"],[0,"    "]],"start1":1066,"start2":1066,"length1":45,"length2":8}]],"length":1607,"saved":false}
{"ts":1381926635736,"patch":[[{"diffs":[[0,"    "],[-1,"this.filepath = filepath;"],[1,"var fs = require(\"fs\");\n    this.filepath = filepath;\n    \n    //Putting data into memory"],[0,"\n   "]],"start1":67,"start2":67,"length1":33,"length2":97},{"diffs":[[0,"time"],[-1,"\n\n        var fs = require(\"fs\");\n    "],[0,"\n   "]],"start1":790,"start2":790,"length1":46,"length2":8}]],"length":1633,"saved":false}
{"ts":1381926685278,"patch":[[{"diffs":[[0,"   }\n        if("],[-1,"!"],[0,"this.db.head.max"]],"start1":358,"start2":358,"length1":33,"length2":32},{"diffs":[[0,"ad.maxId"],[1," > 0"],[0,"){\n     "]],"start1":384,"start2":384,"length1":16,"length2":20}]],"length":1636,"saved":false}
{"ts":1381926708732,"patch":[[{"diffs":[[0,"   }\n        if("],[1,"!("],[0,"this.db.head.col"]],"start1":596,"start2":596,"length1":32,"length2":34},{"diffs":[[0,".length > 0)"],[1,")"],[0,"{\n          "]],"start1":638,"start2":638,"length1":24,"length2":25}]],"length":1639,"saved":false}
{"ts":1381926756041,"patch":[[{"diffs":[[0,"   }\n        if("],[1,"!("],[0,"this.db.head.max"]],"start1":358,"start2":358,"length1":32,"length2":34},{"diffs":[[0,"xId > 0)"],[1,")"],[0,"{\n      "]],"start1":391,"start2":391,"length1":16,"length2":17}]],"length":1642,"saved":false}
{"ts":1381927084755,"patch":[[{"diffs":[[0,"}\n    }\n};\n\n"],[1,"JSONDB.prototype.select = function(field, value){\n    var result = [];\n    for(var i = 0; i<this.db.data.length; i++){\n        if(this.db.data[i][field] == value){\n            result.push(this.db.data[i]);\n        }\n    }\n};\n\n"],[0,"JSONDB.proto"]],"start1":1503,"start2":1503,"length1":24,"length2":250}]],"length":1868,"saved":false}
{"ts":1381927138139,"patch":[[{"diffs":[[0,"        }\n    }\n"],[1,"    return result;\n"],[0,"};\n\nJSONDB.proto"]],"start1":1721,"start2":1721,"length1":32,"length2":51}]],"length":1887,"saved":false}
{"ts":1381927596285,"patch":[[{"diffs":[[0,"result;\n};\n\n"],[1,"JSONDB.prototype.delete = function(id){\n    for(var i = 0; i < this.db.data.length(); i++){\n        if(this.db.data[i].id == id){\n            this.db.data.remove(i);\n        }\n    }\n}\n\nArray.prototype.remove = function(from, to) {\n  var rest = this.slice((to || from) + 1 || this.length);\n  this.length = from < 0 ? this.length + from : from;\n  return this.push.apply(this, rest);\n};\n\n"],[0,"JSONDB.proto"]],"start1":1748,"start2":1748,"length1":24,"length2":409}]],"length":2272,"saved":false}
{"ts":1381927644262,"patch":[[{"diffs":[[0,"a.length"],[-1,"()"],[0,"; i++){\n"]],"start1":1834,"start2":1834,"length1":18,"length2":16}]],"length":2270,"saved":false}
{"ts":1381927731394,"patch":[[{"diffs":[[0,"result;\n};\n\n"],[1,"JSONDB.prototype.selectAll = function(){\n    return this.db.data;\n};\n\n"],[0,"JSONDB.proto"]],"start1":1748,"start2":1748,"length1":24,"length2":94},{"diffs":[[0,"\n    }\n}"],[1,";"],[0,"\n\nArray."]],"start1":2003,"start2":2003,"length1":16,"length2":17},{"diffs":[[0,"this.db));\n}"],[1,";"]],"start1":2329,"start2":2329,"length1":12,"length2":13}]],"length":2342,"saved":false}
{"ts":1381932156824,"patch":[[{"diffs":[[0,"his.db));\n};"],[1,"\n\nJSONDB.prototype.commit = function(){\n    JSONDB.prototype.save();\n};"]],"start1":2330,"start2":2330,"length1":12,"length2":83}]],"length":2413,"saved":false}
{"ts":1381932262743,"patch":[[{"diffs":[[0,"e.save();\n};"],[1,"\n\nJSONDB.prototype.getColumns = function(){\n    return this.data.head.columnNames;  \n};"]],"start1":2401,"start2":2401,"length1":12,"length2":99}]],"length":2500,"saved":false}
{"ts":1381932426539,"patch":[[{"diffs":[[0,"n this.d"],[-1,"ata"],[1,"b"],[0,".head.co"]],"start1":2466,"start2":2466,"length1":19,"length2":17}]],"length":2498,"saved":false}
{"ts":1381932524324,"patch":[[{"diffs":[[0,"result;\n};\n\n"],[1,"JSONDB.prototype.selectOne = function(field, value){\n    var result = [];\n    for(var i = 0; i<this.db.data.length; i++){\n        if(this.db.data[i][field] == value){\n            result.push(this.db.data[i]);\n            return result;\n        }\n    }\n};\n\n"],[0,"JSONDB.proto"]],"start1":1748,"start2":1748,"length1":24,"length2":280}]],"length":2754,"saved":false}
{"ts":1381932551783,"patch":[[{"diffs":[[0,"  }\n};\n\n"],[1,"JSONDB.prototype.deleteOne = function(id){\n    for(var i = 0; i < this.db.data.length; i++){\n        if(this.db.data[i].id == id){\n            this.db.data.remove(i);\n            return;\n        }\n    }\n};\n\n"],[0,"Array.pr"]],"start1":2262,"start2":2262,"length1":16,"length2":223}]],"length":2961,"saved":false}
